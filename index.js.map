{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * Nexa-Dapt.org — Full Interactive Script 2025\n * Библиотеки: GSAP, ScrollTrigger, Lenis, SplitType, Lucide\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 0. ПРЕДВАРИТЕЛЬНАЯ НАСТРОЙКА (Fixes) ---\n    // Скрываем сообщение формы сразу, чтобы избежать мигания при загрузке\n    const successMsg = document.getElementById('form-success');\n    if (successMsg) {\n        successMsg.style.display = 'none';\n        successMsg.classList.remove('is-visible');\n    }\n\n    // Инициализация иконок Lucide\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 1. ПЛАВНЫЙ СКРОЛЛ (Lenis) ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smoothWheel: true\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // --- 2. GSAP АНИМАЦИИ ---\n    gsap.registerPlugin(ScrollTrigger);\n\n    // Анимация текста в Hero (SplitType + GSAP)\n    const heroTitle = new SplitType('.hero__title', { types: 'words, chars' });\n    if (heroTitle.chars) {\n        gsap.from(heroTitle.chars, {\n            opacity: 0,\n            y: 50,\n            rotateX: -90,\n            stagger: 0.03,\n            duration: 1,\n            ease: \"back.out(1.7)\",\n            delay: 0.5\n        });\n    }\n\n    // Анимация появления секций (Исправляет проблему с about__grid)\n    const revealElements = document.querySelectorAll('.about__card, .case-card, .blog-card, .section-title, .innovation-item, .bento-card');\n    revealElements.forEach((el) => {\n        gsap.fromTo(el, \n            { opacity: 0, y: 60 },\n            {\n                scrollTrigger: {\n                    trigger: el,\n                    start: \"top 85%\",\n                    toggleActions: \"play none none none\"\n                },\n                opacity: 1,\n                y: 0,\n                duration: 0.8,\n                ease: \"power2.out\"\n            }\n        );\n    });\n\n    // --- 3. ИНТЕРАКТИВ И КОМПОНЕНТЫ ---\n\n    // Хедер при скролле\n    window.addEventListener('scroll', () => {\n        const header = document.querySelector('.header');\n        if (window.scrollY > 50) {\n            header.classList.add('header--scrolled');\n        } else {\n            header.classList.remove('header--scrolled');\n        }\n    });\n\n    // Мобильное меню\n    const burger = document.getElementById('burger-menu');\n    const mobileOverlay = document.getElementById('mobile-menu-overlay');\n    const mobileLinks = document.querySelectorAll('.mobile-menu__link');\n\n    const toggleMenu = () => {\n        mobileOverlay.classList.toggle('is-active');\n        document.body.style.overflow = mobileOverlay.classList.contains('is-active') ? 'hidden' : '';\n    };\n\n    burger?.addEventListener('click', toggleMenu);\n    mobileLinks.forEach(link => link.addEventListener('click', toggleMenu));\n\n    // Bento Grid - Эффект следящего света (Mouse Tracking)\n    const bentoGrid = document.querySelector('.innovations__bento');\n    const bentoCards = document.querySelectorAll('.bento-card');\n\n    if (bentoGrid) {\n        bentoGrid.addEventListener('mousemove', (e) => {\n            bentoCards.forEach(card => {\n                const rect = card.getBoundingClientRect();\n                const x = e.clientX - rect.left;\n                const y = e.clientY - rect.top;\n                card.style.setProperty('--mouse-x', `${x}px`);\n                card.style.setProperty('--mouse-y', `${y}px`);\n            });\n        });\n    }\n\n    // Аккордеон FAQ\n    const faqQuestions = document.querySelectorAll('.faq__question');\n    faqQuestions.forEach(btn => {\n        btn.addEventListener('click', () => {\n            const answer = btn.nextElementSibling;\n            const isActive = btn.classList.contains('active');\n\n            faqQuestions.forEach(q => {\n                q.classList.remove('active');\n                q.nextElementSibling.style.maxHeight = null;\n            });\n\n            if (!isActive) {\n                btn.classList.add('active');\n                answer.style.maxHeight = answer.scrollHeight + \"px\";\n            }\n        });\n    });\n\n    // --- 4. ФОРМА И КАПЧА (Fix Success Message) ---\n    const form = document.getElementById('main-form');\n    const captchaLabel = document.getElementById('captcha-label');\n    const captchaInput = document.getElementById('captcha-input');\n    const phoneInput = document.getElementById('phone-input');\n\n    // Математическая капча\n    const n1 = Math.floor(Math.random() * 8) + 1;\n    const n2 = Math.floor(Math.random() * 6) + 1;\n    const correctSum = n1 + n2;\n    if (captchaLabel) captchaLabel.innerText = `Подтвердите: ${n1} + ${n2} = ?`;\n\n    // Валидация телефона (только цифры)\n    phoneInput?.addEventListener('input', (e) => {\n        e.target.value = e.target.value.replace(/\\D/g, '');\n    });\n\n    // Сабмит формы\n    form?.addEventListener('submit', (e) => {\n        e.preventDefault();\n\n        if (parseInt(captchaInput.value) !== correctSum) {\n            alert('Неверный ответ капчи!');\n            return;\n        }\n\n        const btn = form.querySelector('button');\n        const oldText = btn.innerText;\n        btn.innerText = 'Отправка...';\n        btn.disabled = true;\n\n        // Имитация AJAX\n        setTimeout(() => {\n            form.reset();\n            \n            // Показ сообщения об успехе\n            if (successMsg) {\n                successMsg.style.display = 'block';\n                setTimeout(() => successMsg.classList.add('is-visible'), 10);\n                \n                // Скрываем через 5 секунд\n                setTimeout(() => {\n                    successMsg.classList.remove('is-visible');\n                    setTimeout(() => successMsg.style.display = 'none', 500);\n                }, 5000);\n            }\n\n            btn.innerText = oldText;\n            btn.disabled = false;\n        }, 1500);\n    });\n\n    // --- 5. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookie-popup');\n    const cookieAccept = document.getElementById('cookie-accept');\n\n    if (!localStorage.getItem('nexa_cookies_done')) {\n        setTimeout(() => {\n            cookiePopup?.classList.add('cookie-popup--active');\n        }, 3000);\n    }\n\n    cookieAccept?.addEventListener('click', () => {\n        localStorage.setItem('nexa_cookies_done', 'true');\n        cookiePopup?.classList.remove('cookie-popup--active');\n    });\n\n});"],"names":["successMsg","lenis","t","raf","time","heroTitle","el","header","burger","mobileOverlay","mobileLinks","toggleMenu","link","bentoGrid","bentoCards","card","rect","x","y","faqQuestions","btn","answer","isActive","q","form","captchaLabel","captchaInput","phoneInput","n1","n2","correctSum","oldText","cookiePopup","cookieAccept"],"mappings":"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"}